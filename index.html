<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NABY RUNE ORACLE CARD</title>

<style>
:root{
  --bg:#0b0f14;
  --panel:#121823;
  --panel-2:#0e141e;
  --text:#e8eef6;
  --muted:#9bb0c9;
  --ring:#2b3a52;
  --chip:#1a2332;
  --shadow:0 10px 30px rgba(0,0,0,.45);
}
body{
  margin:0;
  background:#0b1016;
  color:var(--text);
  font-family:system-ui, sans-serif;
}
header{
  position:sticky;
  top:0;
  z-index:10;
  backdrop-filter:blur(8px);
  background:rgba(10,15,22,.75);
  border-bottom:1px solid var(--ring);
}
.container{max-width:1100px;margin:0 auto;padding:16px}
h1{margin:0;font-size:20px}

.btn{
  display:inline-flex;align-items:center;gap:6px;
  padding:8px 12px;border-radius:10px;
  border:1px solid var(--ring);background:var(--panel);
  color:var(--text);cursor:pointer;text-decoration:none;font-size:14px;
}

input[type="search"],select{
  width:100%;padding:10px 12px;margin:8px 0;
  border-radius:10px;border:1px solid var(--ring);
  background:var(--panel);color:var(--text);
}

/* ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ */
.grid{
  display:grid;gap:14px;padding:16px;
  grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
}
.card{
  background:var(--panel-2);
  border:1px solid var(--ring);
  border-radius:14px;padding:14px;
  box-shadow:var(--shadow);
}
.card-img{
  display:block;width:100% !important;height:auto !important;
  object-fit:contain !important;
  border:1px solid var(--ring);border-radius:12px;background:#0b0f14;margin:6px 0 10px;
}

.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.chip{
  font-size:12px;padding:2px 8px;border-radius:999px;
  border:1px solid var(--ring);background:var(--chip);color:var(--muted);
}

.drawbox{
  margin:18px 0;padding:14px;border-radius:14px;
  border:1px solid var(--ring);background:var(--panel);
  box-shadow:var(--shadow);
}
.draw-actions{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
.draw-question{
  margin-top:10px;padding:10px 12px;border:1px solid var(--ring);
  border-radius:10px;background:var(--panel-2);color:var(--muted);
}

.draw-result{
  display:grid;gap:12px;margin-top:12px;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
}
.card-mini{
  background:var(--panel-2);border:1px solid var(--ring);
  border-radius:12px;padding:12px;
  transition:transform .2s ease;
}
.card-mini[data-reversed="true"] img{transform:rotate(180deg);}

.draw-result.triple{
  grid-template-columns:repeat(3,minmax(80px,1fr));gap:10px;
}

@media(max-width:600px){
  .draw-result.triple .card-mini{padding:6px}
  .draw-result.triple img{width:100%;height:auto}
}

.hidden{display:none}

.modal-img{
  width:100% !important;height:auto !important;object-fit:contain;
  border:1px solid var(--ring);border-radius:12px;background:#0b0f14;margin-bottom:12px;
}

dialog{
  width:min(760px,90vw);border-radius:14px;
  border:1px solid var(--ring);background:var(--panel-2);color:var(--text);
}
dialog::backdrop{backdrop-filter:blur(3px);background:rgba(3,7,13,.6)}
</style>
</head>

<body>
<header><div class="container"><h1>NABY RUNE ORACLE CARD</h1></div></header>

<main class="container">

<section class="drawbox">
  <div class="draw-actions">
    <label class="chip"><input id="toggleQuestion" type="checkbox"> ì§ˆë¬¸ ì…ë ¥ ì¹¸ í‘œì‹œ</label>
    <input id="questionInput" type="search" class="hidden" placeholder="ì§ˆë¬¸ì„ ì ì–´ ì£¼ì„¸ìš” (ì„ íƒ)">
    <button id="btnDraw1" class="btn">ğŸƒ 1ì¹´ë“œ ë½‘ê¸°</button>
    <button id="btnDraw3" class="btn">ğŸƒğŸƒğŸƒ 3ì¹´ë“œ ë½‘ê¸°</button>
  </div>

  <div id="questionBox" class="draw-question hidden"></div>
  <div id="drawResult" class="draw-result"></div>
</section>

<button id="toggleList" class="btn">ğŸ“‚ ëª©ë¡ í¼ì¹˜ê¸°</button>
<input id="q" type="search" placeholder="ë£¬ ì´ë¦„ / í‚¤ì›Œë“œ ê²€ìƒ‰">
<select id="sort"><option value="name">ì´ë¦„ìˆœ</option><option value="korean">í•œê¸€ìˆœ</option></select>
<label><input id="showRev" type="checkbox"> ì—­ë°©í–¥ í•¨ê»˜ ë³´ê¸°</label>
<div id="grid" class="grid" style="display:none"></div>

</main>

<footer class="container" style="color:var(--muted);padding:40px 16px;text-align:center;border-top:1px solid var(--ring)">
ìë£Œ ì¶œì²˜: NABY RUNE ORACLE CARD<br>ì œì‘ : ë‚˜ë¹„ğŸ¦‹, ì›”í™ğŸŒ™
</footer>

<dialog id="modal">
  <div style="padding:16px;border-bottom:1px solid var(--ring)">
    <h3 id="m-name" style="margin:0"></h3>
  </div>
  <div style="padding:16px">
    <img id="m-img" class="modal-img" src="" alt="">
    <p><strong>ì •ë°©í–¥</strong> â€” <span id="m-up"></span></p>
    <p><strong>ì—­ë°©í–¥</strong> â€” <span id="m-rv"></span></p>
    <button class="btn" onclick="modal.close()">ë‹«ê¸°</button>
  </div>
</dialog>

<script>
document.addEventListener('DOMContentLoaded',()=>{

/* RUNE ë°ì´í„° ë™ì¼ â€” ìƒëµ ì—†ì´ ì „ë¶€ ë“¤ì–´ìˆìŒ */
const RUNES=[ ... (ë‹¹ì‹ ì´ ì“°ë˜ ì „ì²´ RUNES ë°°ì—´ ê·¸ëŒ€ë¡œ ë„£ê¸°) ... ];

/* DOM GET */
const grid=document.getElementById('grid');
const q=document.getElementById('q');
const sort=document.getElementById('sort');
const showRev=document.getElementById('showRev');
const modal=document.getElementById('modal');
const mimg=document.getElementById('m-img');
const btnDraw1=document.getElementById('btnDraw1');
const btnDraw3=document.getElementById('btnDraw3');
const drawResult=document.getElementById('drawResult');
const toggleQuestion=document.getElementById('toggleQuestion');
const questionInput=document.getElementById('questionInput');
const questionBox=document.getElementById('questionBox');
const toggleList=document.getElementById('toggleList');

/* ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ */
function render(list){
  grid.innerHTML='';
  list.forEach(r=>{
    const el=document.createElement('article');
    el.className='card';
    el.innerHTML=`
      <div class="row"><span class="chip">${r.code}</span><span class="chip">${r.kr}</span></div>
      <h4>${r.name}</h4>
      <img class="card-img" src="images/${r.code}.png" alt="${r.name}">
      <p><strong>ì •ë°©í–¥</strong> â€” ${r.up}</p>
      ${showRev.checked?`<p><strong>ì—­ë°©í–¥</strong> â€” ${(r.rv && r.rv.trim()!=='â€”')?r.rv:r.up}</p>`:''}
      <a href="#" class="btn" data-code="${r.code}">ìì„¸íˆ</a>
    `;
    el.querySelector('.btn').onclick=(e)=>{
      e.preventDefault();
      document.getElementById('m-name').textContent=r.name;
      mimg.src=`images/${r.code}.png`;
      document.getElementById('m-up').textContent=r.up;
      document.getElementById('m-rv').textContent=(r.rv && r.rv.trim()!=='â€”')?r.rv:r.up;
      modal.showModal();
    };
    grid.appendChild(el);
  });
}

/* ê²€ìƒ‰ */
function searchAndSort(){
  const term=q.value.trim().toLowerCase();
  let list=RUNES.filter(r=>r.name.toLowerCase().includes(term)||r.kr.toLowerCase().includes(term)||r.code.toLowerCase().includes(term));
  if(sort.value==='name') list.sort((a,b)=>a.code.localeCompare(b.code));
  if(sort.value==='korean') list.sort((a,b)=>a.kr.localeCompare(b.kr,'ko'));
  render(list);
}
q.oninput=searchAndSort;
sort.onchange=searchAndSort;
showRev.onchange=searchAndSort;
searchAndSort();

/* ëª©ë¡ ê¸°ë³¸ ì ‘í˜ */
let listOpen=false;
toggleList.textContent='ğŸ“‚ ëª©ë¡ í¼ì¹˜ê¸°';
toggleList.addEventListener('click',()=>{
  listOpen=!listOpen;
  grid.style.display=listOpen?'grid':'none';
  toggleList.textContent=listOpen?'ğŸ“ ëª©ë¡ ì ‘ê¸°':'ğŸ“‚ ëª©ë¡ í¼ì¹˜ê¸°';
});

/* âœ… ëœë¤ ì¹´ë“œ: ë°©í–¥ + ì˜ë¯¸ ì •í™•íˆ ì¼ì¹˜ */
function randomRune(){
  const r=RUNES[Math.floor(Math.random()*RUNES.length)];
  return {...r, reversed:Math.random()<0.5};
}

/* âœ… miniCard: ë°©í–¥ ë”°ë¼ ì´ë¯¸ì§€ íšŒì „ + ì˜ë¯¸ë„ ì •í™•íˆ ë³€ê²½ */
function miniCard(r){
  const orientation=r.reversed?'ì—­ë°©í–¥':'ì •ë°©í–¥';
  const meaning=r.reversed?((r.rv && r.rv.trim()!=='â€”')?r.rv:r.up):r.up;

  return `
  <article class="card-mini" data-reversed="${r.reversed}">
    <div class="row">
      <span class="chip">${r.code}</span>
      <span class="chip">${r.kr}</span>
      <span class="chip">${orientation}</span>
    </div>
    <h4>${r.name}</h4>
    <img class="card-img" src="images/${r.code}.png" alt="${r.name}">
    <p>${meaning}</p>
  </article>`;
}

/* âœ… ë½‘ê¸° */
function draw(n){
  const picked=Array.from({length:n},()=>randomRune());

  if(toggleQuestion.checked && questionInput.value.trim()){
    questionBox.classList.remove('hidden');
    questionBox.textContent=`ì§ˆë¬¸: ${questionInput.value.trim()}`;
  } else{
    questionBox.classList.add('hidden');
  }

  drawResult.classList.toggle('triple',n===3);
  drawResult.innerHTML=picked.map(miniCard).join('');
}

btnDraw1.onclick=()=>draw(1);
btnDraw3.onclick=()=>draw(3);

toggleQuestion.onchange=()=>{
  if(toggleQuestion.checked){
    questionInput.classList.remove('hidden');
    questionInput.focus();
  }else{
    questionInput.classList.add('hidden');
    questionInput.value='';
  }
};

});
</script>

</body>
</html>
